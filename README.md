# Последовательные диаграммы по теме Умный дом


# 1 Управление освещением
<img width="1297" height="657" alt="Image" src="https://github.com/user-attachments/assets/24f85d17-d507-479b-b294-50e9dd0cf198" />


## Основные компоненты
Владелец — пользователь, который взаимодействует с системой.

Мобильное приложение — интерфейс для управления умным домом.

Центральный хаб — управляющий устройство, координирующий команды.

Умная лампа — исполнительное устройство.

База данных — хранит настройки и статусы устройств.

Сервер уведомлений — логирует события.


## Последовательность действий
```PLAT
Инициация команды:

Владелец нажимает кнопку включения света в приложении.

Приложение отправляет команду light_on хабу с указанием комнаты.

Получение настроек:

Хаб запрашивает у базы данных настройки для лампы в гостиной (например, яркость 80%, теплый свет).

База данных возвращает параметры.

Включение лампы:

Хаб передает лампе команду switchOn с полученными настройками.

Лампа подтверждает статус ON.

Обновление статуса:

Хаб обновляет статус лампы в базе данных.

База данных подтверждает обновление.

Логирование события:

Хаб отправляет уведомление о включении света на сервер логирования.

Сервер подтверждает прием данных.

Завершение операции:

Хаб возвращает приложению успешный ответ.

Приложение отображает иконку включенного света.

```
## Обработка ошибок (блок alt):
Если связь с лампой нарушена, хаб отправляет приложению ошибку device_unavailable.

Приложение показывает владельцу сообщение об ошибке.

# 2 Управление освещением гостем
<img width="1178" height="861" alt="Image" src="https://github.com/user-attachments/assets/ce33a80e-5e40-45db-93ae-e6e5da3f1172" />

## Основные компоненты
Гость — пользователь с ограниченными правами

Гостевой интерфейс — упрощенное приложение для гостей

Система авторизации — проверяет права доступа

Центральный хаб — управляющее устройство

Умная лампа — исполнительное устройство

База данных — хранит настройки и права доступа

## 1. Авторизация гостя
```
Гость -> Гостевой интерфейс: Открывает гостевой режим
Гостевой интерфейс -> Система авторизации: validateGuestAccess()
Система авторизации -> База данных: checkGuestPermissions()
База данных --> Система авторизации: {lights_control: true, temp_control: false}
Система авторизации --> Гостевой интерфейс: access_granted
```
Результат: Гость получает права на управление светом, но не температурой.

## 2. Включение света с ограничениями
```
Гость -> Гостевой интерфейс: Нажимает включить свет
Гостевой интерфейс -> Хаб: guestCommand("light_on", room="living_room")
Хаб -> База данных: verifyGuestLimitations()
База данных --> Хаб: {max_brightness: 50%, no_color_change}
```
## 3. Выполнение команды с ограничениями
```
Хаб -> Лампа: switchOn(brightness=50%)
Лампа --> Хаб: status: ON (brightness=50%)
Хаб -> База данных: logGuestActivity("guest_light_on")
База данных --> Хаб: activity_logged
Хаб --> Гостевой интерфейс: success_response
Гостевой интерфейс --> Гость: Показывает включенный свет
```
## 4 Сценарий отказа: Попытка несанкционированного действия

```
Гость -> Гостевой интерфейс: Пытается изменить температуру
Гостевой интерфейс -> Хаб: guestCommand("set_temp", value=25)
Хаб -> Система авторизации: validateGuestPermission("temp_control")
Система авторизации --> Хаб: permission_denied
Хаб --> Гостевой интерфейс: error_response("access_denied")
Гостевой интерфейс --> Гость: Показывает "Функция недоступна"
```

# 3 Администратор - Настройка системы
<img width="1501" height="1034" alt="Image" src="https://github.com/user-attachments/assets/3ee9b126-cad5-474a-85d1-3224929aab7f" />
